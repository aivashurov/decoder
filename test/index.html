<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Decoder Test</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    textarea { width: 100%; box-sizing: border-box; margin-bottom: 10px; }
    button { padding: 8px 16px; }
    #test-badge {
      position: fixed; top: 85px; right: 10px;
      background: #ff5722; color: #fff; padding: 5px 10px;
      font-size: 12px; font-weight: bold; border-radius: 3px;
      box-shadow: 0 0 5px rgba(0,0,0,0.2); opacity: 0.9;
      z-index: 9999;
    }
    #extended-output {
      margin-top: 20px;
      padding: 15px;
      background: #f0f0f0;
      border-radius: 5px;
      font-size: 13px;
      white-space: pre-wrap;
      color: #333;
    }
  </style>
</head>
<body>
  <div id="test-badge">–¢–ï–°–¢–û–í–´–ô –†–ï–ñ–ò–ú</div>

  <h2>–°–∏—Å—Ç–µ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</h2>
  <textarea id="input" rows="6" placeholder="–í—Å—Ç–∞–≤—å—Ç–µ –∑–¥–µ—Å—å –æ–¥–Ω–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–æ —Å—Ç—Ä–æ–∫–∞–º)"></textarea>
  <button onclick="decode()">–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å</button>
  <textarea id="result" rows="6" readonly placeholder="–ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç"></textarea>

  <div id="extended-output">
    <strong>üîç –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ (—Ç–µ—Å—Ç):</strong>
    <div id="extended-content">–ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–≤–µ–¥–µ–Ω–∏–π.</div>
  </div>

  <script>
  function decode() {
    const input = document.getElementById("input").value;
    const lines = input.split("\n");
    const output = [];
    let extended = "";

    for (let i = 0; i < lines.length; i++) {
      const raw = lines[i];
      const line = raw.trim();
      if (!line) continue;

      // GDS service message (SSR / FLIFO / OSI)
      const svc = line.match(/^(SSR|FLIFO|OSI)\s+(.*)$/i);
      if (svc) {
        const type = svc[1].toUpperCase();
        const content = svc[2];
        extended += `üí¨ –°–ª—É–∂–µ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ [${type}]: ${content}\n`;
        continue;
      }

      // *** –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–∏–Ω–≥ ***
      // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫—É –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
      output.push(line);
    }

    // –í—ã–≤–æ–¥–∏–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    document.getElementById("result").value = output.join("\n");

    // –í—ã–≤–æ–¥–∏–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    const extNode = document.getElementById("extended-content");
    extNode.textContent = extended.trim() || "–ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–≤–µ–¥–µ–Ω–∏–π.";
  }
  </script>
</body>
</html>
